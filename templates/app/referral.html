<!DOCTYPE html>
<html lang="en" class="selection:bg-[#fca5a5] selection:text-black">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Referral Program | FixMyLanding</title>
  <meta name="description" content="Refer a friend and get a free full audit.">
  <meta name="robots" content="noindex,nofollow">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Referral Program | FixMyLanding">
  <meta property="og:description" content="Refer a friend and get a free full audit.">
  <meta property="og:image" content="{{ url_for('static', filename='imgs/og-image.png') }}">
  <meta property="og:image:alt" content="FixMyLanding preview">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='imgs/favicon.ico') }}">
  <script defer data-website-id="dfid_5CENfXdlBU0wZKBoKOxd4" data-domain="fixmyland.ing" src="https://datafa.st/js/script.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
  <style>
    body {
      background: #1F1F1F;
      color: #e5e5e5;
      font-family: 'Bricolage Grotesque', sans-serif;
      margin: 0;
      min-height: 100vh;
    }
    .font-mono { font-family: 'JetBrains Mono', monospace; }
  </style>
</head>
<body class="relative min-h-screen">
  <div class="paper-grid"></div>
  <div class="noise-overlay"></div>
  <main class="max-w-2xl mx-auto px-6 py-12">
    <!-- Header -->
    <div class="flex items-center justify-between mb-10">
      <a href="/app/dashboard" class="text-xl md:text-2xl font-black tracking-tighter text-white">fixmy<span class="text-[#fca5a5]">land<span class="text-white">.</span>ing</span></a>
      <a href="/app/dashboard" class="text-sm font-bold text-gray-300 hover:text-white transition-colors flex items-center gap-1.5">
        <i data-lucide="arrow-left" class="w-4 h-4"></i>
        Dashboard
      </a>
    </div>

    <!-- Main Card -->
    <div class="bg-[#2a2a2a] border-2 border-[#444] p-8 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
      <p class="font-mono text-[10px] uppercase text-gray-500 mb-2">Referral Program</p>
      <h1 class="text-2xl md:text-3xl font-black text-white mb-2">Get a Free <span class="text-[#fca5a5]">Full</span> Audit</h1>
      <p class="text-sm text-gray-400 mb-8">Refer someone to FixMyLanding. If they subscribe, you get <b class="text-white">1 free Full scan</b> — on us.</p>

      <!-- How it works -->
      <div class="space-y-5 mb-8">
        <h2 class="font-mono text-[10px] uppercase text-gray-500">How it works</h2>
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 flex-shrink-0 flex items-center justify-center bg-[#fca5a5] text-black font-black text-sm border border-[#444]">1</div>
          <div>
            <p class="text-sm font-bold text-white">Share your referral link</p>
            <p class="text-xs text-gray-400 mt-0.5">Send it to someone who could use a landing page audit.</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 flex-shrink-0 flex items-center justify-center bg-[#fca5a5] text-black font-black text-sm border border-[#444]">2</div>
          <div>
            <p class="text-sm font-bold text-white">They subscribe to Pro</p>
            <p class="text-xs text-gray-400 mt-0.5">Your referral signs up and upgrades to a paid plan.</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 flex-shrink-0 flex items-center justify-center bg-[#fca5a5] text-black font-black text-sm border border-[#444]">3</div>
          <div>
            <p class="text-sm font-bold text-white">DM us to claim your reward</p>
            <p class="text-xs text-gray-400 mt-0.5">Message <a href="https://x.com/jimdin79" target="_blank" class="text-[#fca5a5] hover:underline">@jimdin79</a> on X — we'll verify and grant your free Full audit.</p>
          </div>
        </div>
      </div>

      <!-- Referral link -->
      <div class="bg-[#1F1F1F] border-2 border-[#444] p-5 mb-6">
        <label class="font-mono text-[10px] uppercase text-gray-500 block mb-2">Your Referral Link</label>
        <div class="flex items-center gap-2">
          <input
            id="ref-link"
            type="text"
            readonly
            value="https://fixmyland.ing/?ref={{ user_id }}"
            class="flex-1 bg-[#2a2a2a] border border-[#444] text-white text-sm font-mono px-3 py-2.5 outline-none truncate"
          >
          <button
            onclick="copyRefLink()"
            id="copy-btn"
            class="flex-shrink-0 bg-[#fca5a5] text-black px-4 py-2.5 font-bold text-sm border border-[#444] shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-none transition-all flex items-center gap-1.5"
          >
            <i data-lucide="copy" class="w-4 h-4"></i>
            Copy
          </button>
        </div>
        <p id="copy-msg" class="text-xs text-green-400 mt-2 hidden">Copied to clipboard!</p>
      </div>

      <!-- Claim section -->
      <div class="bg-[#1F1F1F] border-2 border-[#444] p-5">
        <div class="flex items-start gap-3">
          <i data-lucide="message-circle" class="w-5 h-5 text-[#fca5a5] mt-0.5 flex-shrink-0"></i>
          <div>
            <p class="text-sm font-bold text-white mb-1">Ready to claim?</p>
            <p class="text-xs text-gray-400">Once your referral has subscribed, DM <a href="https://x.com/jimdin79" target="_blank" class="text-[#fca5a5] hover:underline font-bold">@jimdin79 on X</a> with your account email. We'll verify the referral and add a free Full audit to your account.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Your Referrals -->
    <div class="bg-[#2a2a2a] border-2 border-[#444] p-8 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] mt-6">
      <div class="flex items-center justify-between mb-5">
        <div>
          <p class="font-mono text-[10px] uppercase text-gray-500 mb-1">Your Referrals</p>
          <p class="text-sm text-gray-400">{{ referrals|length }} user{{ 's' if referrals|length != 1 }} signed up with your link</p>
        </div>
        <span class="font-mono text-2xl font-black text-white">{{ referrals|length }}</span>
      </div>

      {% if referrals %}
      <div class="space-y-0 border border-[#444] rounded overflow-hidden">
        {% for ref in referrals %}
        <div class="flex items-center justify-between px-4 py-3 {{ 'border-t border-[#444]' if not loop.first }} bg-[#1F1F1F]">
          <div class="flex items-center gap-3 min-w-0">
            <div class="w-7 h-7 flex-shrink-0 flex items-center justify-center bg-[#333] border border-[#444] rounded-full">
              <i data-lucide="user" class="w-3.5 h-3.5 text-gray-400"></i>
            </div>
            <span class="text-sm text-gray-300 font-mono truncate">{{ ref.email }}</span>
          </div>
          <span class="text-xs text-gray-500 font-mono flex-shrink-0 ml-3">{{ ref.created_at[:10] }}</span>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="bg-[#1F1F1F] border border-[#444] rounded p-6 text-center">
        <i data-lucide="users" class="w-8 h-8 text-gray-600 mx-auto mb-2"></i>
        <p class="text-sm text-gray-500">No referrals yet. Share your link to get started!</p>
      </div>
      {% endif %}
    </div>


  </main>

  <script>
    lucide.createIcons();

    function copyRefLink() {
      const input = document.getElementById('ref-link');
      navigator.clipboard.writeText(input.value).then(() => {
        const btn = document.getElementById('copy-btn');
        const msg = document.getElementById('copy-msg');
        btn.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i> Copied';
        msg.classList.remove('hidden');
        lucide.createIcons();
        setTimeout(() => {
          btn.innerHTML = '<i data-lucide="copy" class="w-4 h-4"></i> Copy';
          msg.classList.add('hidden');
          lucide.createIcons();
        }, 2000);
      });
    }
  </script>
</body>
</html>
